--- a/target/linux/ar71xx/files/arch/mips/ath79/mach-arduino-yun.c
+++ b/target/linux/ar71xx/files/arch/mips/ath79/mach-arduino-yun.c
@@ -60,6 +60,17 @@
 	},
 };
 
+static struct gpio_keys_button ds_gpio_keys[] __initdata = {
+	{
+		.desc		= "configuration button",
+		.type		= EV_KEY,
+		.code		= KEY_WPS_BUTTON,
+		.debounce_interval = DS_KEYS_DEBOUNCE_INTERVAL,
+		.gpio		= DS_GPIO_CONF_BTN,
+		.active_low	= 1,
+	},
+};
+
 static void __init ds_common_setup(void)
 {
 	static u8 mac[6];
@@ -95,16 +106,19 @@
 
 	ds_common_setup();
 
-	ath79_register_leds_gpio(-1, ARRAY_SIZE(ds_leds_gpio),
-				 ds_leds_gpio);
-	ath79_register_usb();
-
 	//Disable the Function for some pins to have GPIO functionality active
 	// GPIO6-7-8 and GPIO11
 	ath79_gpio_function_setup(AR933X_GPIO_FUNC_JTAG_DISABLE | AR933X_GPIO_FUNC_I2S_MCK_EN, 0);
 
 	ath79_gpio_function2_setup(AR933X_GPIO_FUNC2_JUMPSTART_DISABLE, 0);
 
+	ath79_register_leds_gpio(-1, ARRAY_SIZE(ds_leds_gpio),
+				 ds_leds_gpio);
+	ath79_register_gpio_keys_polled(-1, DS_KEYS_POLL_INTERVAL,
+					ARRAY_SIZE(ds_gpio_keys),
+					ds_gpio_keys);
+	ath79_register_usb();
+
 	printk("Setting DogStick2 GPIO\n");
 
 	t = ath79_reset_rr(AR933X_RESET_REG_BOOTSTRAP);
